<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Learning Dashboard | T&P AI</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root {
    --dark-blue:#0a3d91;
    --royal-blue:#0a66c2;
    --success:#28a745;
    --bg:#f4f6fa;
    --white:#fff;
    --text:#333;
    --shadow:0 10px 30px rgba(0,0,0,0.08);
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,sans-serif;}
body{background:var(--bg);display:flex;min-height:100vh;color:var(--text);}

/* SIDEBAR */
.sidebar{
    width:260px;
    background:var(--dark-blue);
    color:#fff;
    padding:30px 20px;
    position:fixed;
    height:100vh;
}
.sidebar h2{margin-bottom:30px;}
.sidebar ul{list-style:none;}
.sidebar li{
    padding:14px;
    border-radius:8px;
    margin-bottom:10px;
    cursor:pointer;
}
.sidebar li.active,.sidebar li:hover{background:var(--royal-blue);}

/* MAIN */
.main{margin-left:260px;padding:40px;width:100%;}
.header{margin-bottom:20px;}
.tabs{display:flex;gap:12px;margin-bottom:30px;flex-wrap:wrap;}
.tab-btn{
    padding:10px 22px;
    border:none;
    border-radius:20px;
    cursor:pointer;
    background:#fff;
    box-shadow:var(--shadow);
    font-weight:600;
}
.tab-btn.active{background:var(--royal-blue);color:#fff;}

.dashboard-grid{
    display:grid;
    grid-template-columns:320px 1fr;
    gap:30px;
}

/* CHART */
.chart-card{
    background:#fff;
    padding:20px;
    border-radius:20px;
    box-shadow:var(--shadow);
    text-align:center;
}

/* VIDEOS */
.video-container{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
    gap:20px;
}
.video-card{
    background:#fff;
    border-radius:15px;
    overflow:hidden;
    box-shadow:var(--shadow);
    transition:.3s;
}
.video-card.completed{border:2px solid var(--success);}
.video-card:hover{transform:translateY(-5px);}

.thumbnail{height:150px;cursor:pointer;position:relative;}
.thumbnail img{width:100%;height:100%;object-fit:cover;}
.play-icon{
    position:absolute;
    top:50%;left:50%;
    transform:translate(-50%,-50%);
    font-size:40px;color:white;
}

.video-info{padding:15px;}
.video-info h4{color:var(--dark-blue);font-size:15px;}
.video-info p{font-size:13px;color:#666;}

.status-bar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-top:10px;
}
.check-btn{
    border:none;
    padding:6px 12px;
    border-radius:20px;
    cursor:pointer;
    font-size:12px;
}
.completed .check-btn{background:var(--success);color:white;}

/* MODAL */
.modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.8);
    justify-content:center;
    align-items:center;
}
.modal iframe{width:80vw;height:45vw;max-width:800px;max-height:450px;}
.close-modal{color:white;font-size:30px;cursor:pointer;position:absolute;top:20px;right:30px;}

@media(max-width:900px){
    .sidebar{display:none;}
    .main{margin-left:0;}
    .dashboard-grid{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<div class="sidebar">
    <h2>ðŸŽ“ T&P AI</h2>
    <ul>
        <li class="active">Dashboard</li>
        <li>Tutorials</li>
        <li>Resume</li>
        <li>Mock Interview</li>
    </ul>
</div>

<div class="main">
    <div class="header">
        <h1>Video Learning Hub</h1>
        <p>Track your course completion</p>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="filterVideos('CSE',this)">CSE / IT</button>
        <button class="tab-btn" onclick="filterVideos('ENTC',this)">E&TC</button>
        <button class="tab-btn" onclick="filterVideos('MECH',this)">Mechanical</button>
        <button class="tab-btn" onclick="filterVideos('APT',this)">Aptitude</button>
    </div>

    <div class="dashboard-grid">
        <div class="chart-card">
            <h3>Your Progress</h3>
            <canvas id="progressChart" height="220"></canvas>
            <p id="progressText" style="margin-top:10px;font-weight:bold">0% Completed</p>
        </div>

        <div class="video-container" id="videoGrid"></div>
    </div>
</div>

<!-- MODAL -->
<div class="modal" id="videoModal">
    <span class="close-modal" onclick="closeModal()">&times;</span>
    <iframe id="videoFrame" allowfullscreen></iframe>
</div>

<script>
const videos=[
{id:'v1',branch:'CSE',title:'DSA Roadmap',author:'CodeHelp',thumb:'https://img.youtube.com/vi/zm8_Fi6YXyY/mqdefault.jpg',link:'https://www.youtube.com/embed/zm8_Fi6YXyY'},
{id:'v2',branch:'CSE',title:'Web Dev Roadmap',author:'CodeHelp',thumb:'https://img.youtube.com/vi/GLk7-imcjiI/mqdefault.jpg',link:'https://www.youtube.com/embed/GLk7-imcjiI'},
{id:'v3',branch:'ENTC',title:'Arduino Basics',author:'Paul',thumb:'https://img.youtube.com/vi/fJWR7dBuc18/mqdefault.jpg',link:'https://www.youtube.com/embed/fJWR7dBuc18'},
{id:'v4',branch:'MECH',title:'Thermodynamics',author:'Khan',thumb:'https://img.youtube.com/vi/8N1BxHgsoOw/mqdefault.jpg',link:'https://www.youtube.com/embed/8N1BxHgsoOw'},
{id:'v5',branch:'APT',title:'Time & Work',author:'Aptitude',thumb:'https://img.youtube.com/vi/KE7tQf9spPg/mqdefault.jpg',link:'https://www.youtube.com/embed/KE7tQf9spPg'}
];

let current='CSE';
let chart;

function getCompleted(){
    return new Set(JSON.parse(localStorage.getItem('completed')||'[]'));
}
function saveCompleted(set){
    localStorage.setItem('completed',JSON.stringify([...set]));
}

function filterVideos(branch,btn){
    current=branch;
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');

    const grid=document.getElementById('videoGrid');
    grid.innerHTML='';
    const completed=getCompleted();

    videos.filter(v=>v.branch===branch).forEach(v=>{
        const done=completed.has(v.id);
        const card=document.createElement('div');
        card.className=`video-card ${done?'completed':''}`;
        card.innerHTML=`
            <div class="thumbnail" onclick="playVideo('${v.link}')">
                <img src="${v.thumb}">
                <i class="fa fa-play-circle play-icon"></i>
            </div>
            <div class="video-info">
                <h4>${v.title}</h4>
                <p>${v.author}</p>
                <div class="status-bar">
                    <span>${done?'Completed':'Pending'}</span>
                    <button class="check-btn" onclick="toggle('${v.id}',this)">
                        ${done?'Done':'Mark Done'}
                    </button>
                </div>
            </div>`;
        grid.appendChild(card);
    });
    updateChart();
}

function toggle(id,btn){
    const set=getCompleted();
    const card=btn.closest('.video-card');
    if(set.has(id)){set.delete(id);card.classList.remove('completed');btn.textContent='Mark Done'}
    else{set.add(id);card.classList.add('completed');btn.textContent='Done'}
    saveCompleted(set);
    updateChart();
}

function updateChart(){
    const vids=videos.filter(v=>v.branch===current);
    const completed=getCompleted();
    const done=vids.filter(v=>completed.has(v.id)).length;
    const percent=Math.round(done/vids.length*100)||0;
    document.getElementById('progressText').textContent=`${percent}% Completed`;

    if(chart)chart.destroy();
    chart=new Chart(progressChart,{
        type:'doughnut',
        data:{datasets:[{data:[done,vids.length-done],backgroundColor:['#28a745','#ddd']}]},
        options:{cutout:'70%'}
    });
}

function playVideo(link){
    videoModal.style.display='flex';
    videoFrame.src=link+'?autoplay=1';
}
function closeModal(){
    videoModal.style.display='none';
    videoFrame.src='';
}

filterVideos('CSE',document.querySelector('.tab-btn'));
</script>

</body>
</html>
